<!doctype html>
  <html>
   <head>
     <title>DEMO - Leaflet Dynamic Layers</title>
     <link rel="stylesheet" href="../node_modules/leaflet/dist/leaflet.css">
   </head>
   <body>
     <div id="map" style="height: 400px; width: 400px; border: solid thin gray;"></div>
     <button id="addVisibleTile">Add visible=true Layer (Stamen Tiles - Terrain)</button> Click adds layer to map, and to layers references.
     <br/>
     <button id="addInvisibleTile">Add visible=false Layer (Stamen Tiles - Toner Lite)</button> Click adds layer to layers references only.
     <br/>
     <button id="removeVisibleTile">Remove visible=true Layer From Map (Stamen Tiles - Terrain)</button> Click removes layer from map. Reference to layer still available.
    <script src="../dist/leafletDeclarativeLayers.js"></script>
    <script src="../node_modules/leaflet/dist/leaflet.js"></script>
    <script>
      var geojsonFeature = {
        type: 'Feature',
        properties: {},
        geometry: {
          type: 'Point',
          coordinates: [-115, 49.5],
        },
      };
      var layerMetadata = [
        {
          id: 'toner-lite',
          label: 'Tile Layer Example',
          url: 'https://stamen-tiles.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png',
          visible: false,
        }, {
          id: 'terrain',
          label: 'Tile Layer Example',
          url: 'https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png',
          visible: true,
        },
        {
          id: 'geoJsonLayer',
          label: 'GeoJSON Layer Example',
          data: geojsonFeature,
          visible: true

        }
      ];
      var map = new L.Map('map', { zoom: 8, center: new L.LatLng(49.5, -115)});
      var basemap = new L.TileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {minZoom: 8, maxZoom: 12});		
      map.addLayer(basemap);   
      
      var declaredLayers = new leafletDeclarativeLayers.DeclarativeLayers(map); 

      //add a visible layer
      document.getElementById('addVisibleTile').addEventListener('click', () => {
        declaredLayers.addLayer(layerMetadata[1]);
        console.log('Layer references: ', declaredLayers.getLayerReferences());
      });

      //add an invisible layer
      document.getElementById('addInvisibleTile').addEventListener('click', () => {
        declaredLayers.addLayer(layerMetadata[0]);
        console.log('Layer references: ', declaredLayers.getLayerReferences());
      });

      //remove a visible layer from the map
      document.getElementById('removeVisibleTile').addEventListener('click', () => {
       declaredLayers.removeLayer(declaredLayers.getLayerReferences().terrain);
       console.log('Layer references: ', declaredLayers.getLayerReferences());
      });
    </script>
   </body>
  </html>